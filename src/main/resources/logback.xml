<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <!-- Console appender for general logs -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- ============================================= -->
    <!-- ORCHESTRATOR LOGS -->
    <!-- ============================================= -->
    <appender name="ORCHESTRATOR_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/orchestrator/arb-orchestrator.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/orchestrator/arb-orchestrator-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>50MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- ============================================= -->
    <!-- ARB DETECTION LOGS -->
    <!-- ============================================= -->

    <!-- ArbDetector Logs -->
    <appender name="ARB_DETECTOR_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/detection/arb-detector.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/detection/arb-detector-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>


    <!-- ArbPollingService Logs -->
    <appender name="ARB_POLLING_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/detection/arb-polling-serrvice.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/polling/arb-polling-service-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>


    <!-- ArbFactory Logs -->
    <appender name="ARB_FACTORY_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/detection/arb-factory.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/detection/arb-factory-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- ArbFactory Logs -->
    <appender name="ARB_SERVICE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/detection/arb-service.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/detection/arb-service-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- ============================================= -->
    <!-- BETTING FLOW LOGS - Per Bookmaker -->
    <!-- ============================================= -->

    <!-- MSport Betting Logs -->
    <appender name="MSPORT_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/bookmakers/msport-betting.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/bookmakers/msport-betting-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- SportyBet Betting Logs -->
    <appender name="SPORTY_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/bookmakers/sporty-betting.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/bookmakers/sporty-betting-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- Bet9ja Betting Logs -->
    <appender name="BET9JA_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/bookmakers/bet9ja-betting.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/bookmakers/bet9ja-betting-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- Combined betting flow logs (all bookmakers) -->
    <appender name="ALL_BETTING_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/betting-flow-all.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/betting-flow-all-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- ============================================= -->
    <!-- SYNC MANAGER LOGS -->
    <!-- ============================================= -->
    <appender name="SYNC_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/sync/window-sync.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/sync/window-sync-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>50MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>


    <appender name="SPORTY_FETCHER" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/fetch/sportyfetcher.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/fetch/sportyfetcher-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>50MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>


    <appender name="MSPORT_FETCHER" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/fetch/msportfetcher.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/fetch/msportfetcher-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>50MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- ============================================= -->
    <!-- LOGGER CONFIGURATIONS -->
    <!-- ============================================= -->

    <!-- Orchestrator Logger -->
    <logger name="com.mouse.bet.manager.ArbOrchestrator" level="INFO" additivity="false">
        <appender-ref ref="ORCHESTRATOR_FILE"/>
        <appender-ref ref="CONSOLE"/>
    </logger>

    <!-- ArbDetector Logger -->
    <logger name="com.mouse.bet.detector.ArbDetector" level="INFO" additivity="false">
        <appender-ref ref="ARB_DETECTOR_FILE"/>
        <appender-ref ref="CONSOLE"/>
    </logger>

    <!-- ArbFactory Logger -->
    <logger name="com.mouse.bet.utils.ArbFactory" level="INFO" additivity="false">
        <appender-ref ref="ARB_FACTORY_FILE"/>
        <appender-ref ref="CONSOLE"/>
    </logger>

    <!-- ArbFactory Logger -->
    <logger name="com.mouse.bet.service.ArbService" level="DEBUG" additivity="false">
        <appender-ref ref="ARB_SERVICE"/>
<!--        <appender-ref ref="CONSOLE"/>-->
    </logger>

<!--    &lt;!&ndash; SportyBetOddsFetcher Logger &ndash;&gt;-->
<!--    <logger name="com.mouse.bet.tasks.SportyBetOddsFetcher" level="INFO" additivity="false">-->
<!--        <appender-ref ref="SPORTY_FETCHER"/>-->
<!--        <appender-ref ref="CONSOLE"/>-->
<!--    </logger>-->

<!--    <logger name="com.mouse.bet.tasks.MSportOddsFetcher" level="INFO" additivity="false">-->
<!--        <appender-ref ref="MSPORT_FETCHER"/>-->
<!--&lt;!&ndash;        <appender-ref ref="CONSOLE"/>&ndash;&gt;-->
<!--    </logger>-->


    <!-- Betting Flow Logger (routes to all betting files) -->
    <logger name="com.mouse.bet.logservice.BettingFlowLogger" level="INFO" additivity="false">
        <appender-ref ref="ALL_BETTING_FILE"/>
        <appender-ref ref="MSPORT_FILE"/>
        <appender-ref ref="SPORTY_FILE"/>
        <appender-ref ref="BET9JA_FILE"/>
<!--        <appender-ref ref="CONSOLE"/>-->
    </logger>

    <!-- Betting Flow Logger (routes to all betting files) -->
    <logger name="com.mouse.bet.service.ArbPollingService" level="DEBUG" additivity="false">
        <appender-ref ref="ARB_POLLING_FILE"/>
        <!--        <appender-ref ref="CONSOLE"/>-->
    </logger>

    <!-- MSportWindow Logger -->
    <logger name="com.mouse.bet.window.MSportWindow" level="DEBUG" additivity="false">
        <appender-ref ref="MSPORT_FILE"/>
        <appender-ref ref="CONSOLE"/>
    </logger>

    <!-- MSportMarketSearchUtils Logger -->
    <logger name="com.mouse.bet.utils.MSportMarketSearchUtils" level="DEBUG" additivity="false">
        <appender-ref ref="MSPORT_FILE"/>
        <appender-ref ref="CONSOLE"/>
    </logger>

    <!-- SportyWindow Logger -->
    <logger name="com.mouse.bet.window.SportyWindow" level="DEBUG" additivity="false">
        <appender-ref ref="SPORTY_FILE"/>
        <appender-ref ref="CONSOLE"/>
    </logger>

    <!-- Root logger (everything else) -->
    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
    </root>

</configuration>